"use strict";(self.webpackChunkspa=self.webpackChunkspa||[]).push([[748],{7748:(Mt,j,s)=>{s.r(j),s.d(j,{CategoriesModule:()=>jt});var h=s(1062),Z=s(9808),a=s(3075),I=s(8745),v=s(5954);class $ extends class P{}{}class J{}const Y=[{label:"Inactivo",value:0},{label:"Activo",value:1}];var f=s(520),p=s(2340),t=s(5e3);const C=(new f.WM).set("Content-Type","application/json");let E=(()=>{class o{constructor(e){this.http=e,this.svcUrl="CategoryItems"}Get(){return this.http.get(`${p.N.base_url}/${this.svcUrl}`,{headers:C})}UpdateItem(e){return this.http.put(`${p.N.base_url}/${this.svcUrl}/${e.id}`,e,{headers:C})}CreateItem(e){return this.http.post(`${p.N.base_url}/${this.svcUrl}`,e,{headers:C})}delete(e){return this.http.delete(`${p.N.base_url}/${this.svcUrl}/${e}`,{headers:C})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(f.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var d=s(7489),c=s(5650),M=s(6204),T=s(5330),u=s(9783),O=s(7307),G=s(4297),q=s(1424),U=s(3407),Q=s(242),w=s(845),D=s(4119),g=s(8952);function B(o,n){1&o&&(t.TgZ(0,"small",30),t._uU(1,"Valor requerido."),t.qZA())}function H(o,n){1&o&&(t.TgZ(0,"small",30),t._uU(1,"Valor requerido."),t.qZA())}const L=function(){return{width:"10%"}},_=function(){return{width:"17%"}},k=function(){return{width:"25%"}},A=function(){return{width:"15%"}};function V(o,n){1&o&&(t.TgZ(0,"tr")(1,"th",31),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",31),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",31),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",31),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",31),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th",31),t._uU(17),t.ALo(18,"translate"),t.qZA()()),2&o&&(t.xp6(1),t.Akn(t.DdM(30,L)),t.xp6(1),t.Oqu(t.lcZ(3,18,"columns.id")),t.xp6(2),t.Akn(t.DdM(31,_)),t.xp6(1),t.Oqu(t.lcZ(6,20,"columns.name")),t.xp6(2),t.Akn(t.DdM(32,k)),t.xp6(1),t.Oqu(t.lcZ(9,22,"columns.description")),t.xp6(2),t.Akn(t.DdM(33,_)),t.xp6(1),t.Oqu(t.lcZ(12,24,"columns.code")),t.xp6(2),t.Akn(t.DdM(34,A)),t.xp6(1),t.Oqu(t.lcZ(15,26,"columns.status")),t.xp6(2),t.Akn(t.DdM(35,A)),t.xp6(1),t.Oqu(t.lcZ(18,28,"columns.actions")))}const z=function(){return{width:"15%",padding:"0px"}};function X(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"button",32),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().renderForm(l,!0)}),t.qZA()()()}if(2&o){const e=n.$implicit;t.xp6(1),t.Akn(t.DdM(17,L)),t.xp6(1),t.Oqu(e.id),t.xp6(1),t.Akn(t.DdM(18,_)),t.xp6(1),t.Oqu(e.nombre),t.xp6(1),t.Akn(t.DdM(19,k)),t.xp6(1),t.Oqu(e.descripcion),t.xp6(1),t.Akn(t.DdM(20,_)),t.xp6(1),t.Oqu(e.codigo),t.xp6(1),t.Akn(t.DdM(21,A)),t.xp6(1),t.hij(" ",e.estado?"Activo":"Inactivo"," "),t.xp6(1),t.Akn(t.DdM(22,z))}}function K(o,n){1&o&&(t.TgZ(0,"tr")(1,"td",33),t._uU(2,"No se encontraron registros."),t.qZA()())}let W=(()=>{class o{constructor(e,i,r,l,m,y){this.ref=e,this.config=i,this.fb=r,this.ctgItemsSvc=l,this.msgSvc=m,this.confirmPopUpSvc=y,this.objGrb={form:a.cw,selectedItem:{id:0,nombre:"",descripcion:"",codigo:"",estado:!1},localCategoryDT:J},this.subSink=new I.Y,this.objGrb.localCategoryDT={category:this.config.data.category,categoryItemsList:this.sortItems(this.config.data.categoryItemsList)}}ngOnInit(){this.objGrb.form=this.fb.group({id:[{value:0,disabled:!0}],nombre:["",a.kI.required],descripcion:["",a.kI.required],codigo:["",a.kI.required],estado:!1})}renderForm(e,i){if(this.objGrb.selectedItem=Object.assign({},e),i){const r={id:(0,d.isNumber)(e.id)&&e.id>0?e.id:0,nombre:e.nombre,descripcion:e.descripcion,estado:e.estado};this.objGrb.form.patchValue(Object.assign({},r))}else this.objGrb.form.reset(),this.objGrb.form.patchValue({id:0})}saveData(){if(this.objGrb.form.valid){const e=Object.assign({},this.objGrb.form.value),i={id:this.objGrb.selectedItem.id,categoriaId:this.objGrb.localCategoryDT.category.id,nombre:e.nombre,descripcion:e.descripcion,codigo:e.codigo,estado:e.estado?1:0};this.objGrb.selectedItem.id>0?this.onUpdateItem(i):this.onCreateItem(Object.assign(Object.assign({},i),{id:0}))}}onUpdateItem(e){this.subSink.sink=this.ctgItemsSvc.UpdateItem(e).subscribe({next:i=>{this.resetModalObj(e,"edit"),this.msgSvc.add("success",c.bF.ACTUALIZAR_REG,c.bF.OP_EXITOSA)},error:i=>{this.msgSvc.add("error",c.bF.ACTUALIZAR_REG,`${c.bF.OP_ERROR} : ${i}`)}})}onCreateItem(e){this.subSink.sink=this.ctgItemsSvc.CreateItem(e).subscribe({next:i=>{this.resetModalObj(Object.assign(Object.assign({},e),{id:i}),"new"),this.msgSvc.add("success",c.bF.CREAR_REG,c.bF.OP_EXITOSA)},error:i=>{this.msgSvc.add("error",c.bF.CREAR_REG,`${c.bF.OP_ERROR} : ${i}`)}})}resetModalObj(e,i){switch(i){case"new":this.objGrb.localCategoryDT.categoryItemsList.push(e);break;case"edit":const r=(0,d.findIndex)(this.objGrb.localCategoryDT.categoryItemsList,["id",e.id]);this.objGrb.localCategoryDT.categoryItemsList[r]=e;break;default:this.objGrb.localCategoryDT.categoryItemsList=(0,d.filter)(this.objGrb.localCategoryDT.categoryItemsList,l=>l.id!==e.id)}this.objGrb.localCategoryDT.categoryItemsList=this.sortItems(this.objGrb.localCategoryDT.categoryItemsList),this.objGrb.form.reset(),this.objGrb.form.patchValue({id:0}),this.objGrb.selectedItem={id:0}}sortItems(e){return(0,d.orderBy)(e,["id"],["desc"])}hideDialog(){this.objGrb.localCategoryDT.category.items=this.objGrb.localCategoryDT.categoryItemsList,this.ref.close({category:this.objGrb.localCategoryDT.category,categoryItemsList:this.objGrb.localCategoryDT.categoryItemsList})}ngOnDestroy(){this.subSink.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(T.E7),t.Y36(T.S),t.Y36(a.qu),t.Y36(E),t.Y36(M.o),t.Y36(u.YP))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-category-items"]],decls:43,vars:21,consts:[[3,"key"],[1,"p-grid"],[1,"grid-dialog"],["autocomplete","off",3,"formGroup"],[1,"p-grid",2,"min-height","80px"],[1,"p-field","p-sm-1"],["for","id",1,"required"],["type","text","pInputText","","id","id","formControlName","id"],[1,"p-field","p-sm-3"],["for","nombre",1,"required"],["id","nombre","pInputTextarea","","formControlName","nombre","required","","rows","1","cols","40"],["class","p-error",4,"ngIf"],["for","descripcion",1,"required"],["id","descripcion","pInputTextarea","","formControlName","descripcion","required","","rows","1","cols","40"],[1,"p-field","p-sm-2"],["for","codigo"],["id","codigo","pInputTextarea","","formControlName","codigo","required","","rows","1","cols","40"],[1,"p-field","p-sm-1",2,"text-align","center"],["for","estado",1,"required"],["formControlName","estado"],[1,"p-field","p-sm-2",2,"text-align","right"],["pButton","","type","button","icon","pi pi-check-circle","pTooltip","A\xf1adir","tooltipPosition","top",1,"p-button-text","p-button-raised",2,"margin-right","5px","margin-top","15px",3,"click"],["pButton","","type","button","icon","pi pi-times-circle","pTooltip","Cancelar","tooltipPosition","top",1,"p-button-text","p-button-raised",2,"margin-top","15px",3,"click"],["dataKey","id","styleClass","p-datatable-sm","scrollHeight","250px",3,"value","scrollable"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"cls-ftr-rght"],["pButton","","pRipple","","label","Cerrar","icon","pi pi-times",1,"p-button-text","p-button-rounded","p-button-raised",3,"click"],[1,"p-error"],["scope","col"],["pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Editar","tooltipPosition","top","styleClass","p-button-sm",1,"p-button-rounded","p-button-secondary","p-button-text",3,"click"],["colspan","6"]],template:function(e,i){1&e&&(t._UZ(0,"p-confirmPopup",0),t.TgZ(1,"div",1)(2,"p-card",2)(3,"form",3)(4,"div",4)(5,"div",5)(6,"label",6),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._UZ(9,"input",7),t.qZA(),t.TgZ(10,"div",8)(11,"label",9),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"input",10),t.YNc(15,B,2,0,"small",11),t.qZA(),t.TgZ(16,"div",8)(17,"label",12),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",13),t.YNc(21,H,2,0,"small",11),t.qZA(),t.TgZ(22,"div",14)(23,"label",15),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"input",16),t.qZA(),t.TgZ(27,"div",17)(28,"label",18),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"br")(32,"p-inputSwitch",19),t.qZA(),t.TgZ(33,"div",20)(34,"button",21),t.NdJ("click",function(){return i.saveData()}),t.qZA(),t.TgZ(35,"button",22),t.NdJ("click",function(){return i.renderForm(null,!1)}),t.qZA()()()(),t.TgZ(36,"p-table",23,24),t.YNc(38,V,19,36,"ng-template",25),t.YNc(39,X,13,23,"ng-template",26),t.YNc(40,K,3,0,"ng-template",27),t.qZA()()(),t.TgZ(41,"p-footer",28)(42,"button",29),t.NdJ("click",function(){return i.hideDialog()}),t.qZA()()),2&e&&(t.Q6J("key","popup-category-items"),t.xp6(3),t.Q6J("formGroup",i.objGrb.form),t.xp6(4),t.Oqu(t.lcZ(8,11,"columns.id")),t.xp6(5),t.Oqu(t.lcZ(13,13,"columns.name")),t.xp6(3),t.Q6J("ngIf",i.objGrb.form.controls.nombre.invalid&&(i.objGrb.form.controls.nombre.dirty||i.objGrb.form.controls.nombre.touched)),t.xp6(3),t.Oqu(t.lcZ(19,15,"columns.description")),t.xp6(3),t.Q6J("ngIf",i.objGrb.form.controls.descripcion.invalid&&(i.objGrb.form.controls.descripcion.dirty||i.objGrb.form.controls.descripcion.touched)),t.xp6(3),t.Oqu(t.lcZ(25,17,"columns.code")),t.xp6(5),t.hij("",t.lcZ(30,19,"columns.status")," "),t.xp6(7),t.Q6J("value",i.objGrb.localCategoryDT.categoryItemsList)("scrollable",!0))},directives:[O.P,G.Z,a._Y,a.JL,a.sg,a.Fj,q.o,a.JJ,a.u,U.g,a.Q7,Z.O5,Q.Ql,w.Hq,D.u,g.iA,u.jx,u.$_],pipes:[h.X$],styles:[".cls-ftr-rght[_ngcontent-%COMP%]{float:right!important;padding-top:20px!important;margin-bottom:-10px!important;padding-bottom:20px}.grid-dialog[_ngcontent-%COMP%]{min-height:70px;width:-webkit-fill-available}"]}),o})();var tt=s(9646),et=s(5577);const x=(new f.WM).set("Content-Type","application/json");let S=(()=>{class o{constructor(e){this.http=e,this.svcUrl="Categories"}Get(e){const i=(0,v.y3)(Object.assign({},e));return this.http.get(`${p.N.base_url}/${this.svcUrl}?${i}`,{headers:x}).pipe((0,et.z)(r=>(0,tt.of)(v.mg.fromJS(r))))}Update(e){return this.http.put(`${p.N.base_url}/${this.svcUrl}/${e.id}`,e,{headers:x})}Create(e){return this.http.post(`${p.N.base_url}/${this.svcUrl}`,e,{headers:x})}delete(e){return this.http.delete(`${p.N.base_url}/${this.svcUrl}/${e}`,{headers:x})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(f.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var ot=s(4534),it=s(5315),rt=s(4036);const st=["inputBar"];function nt(o,n){}function at(o,n){if(1&o){const e=t.EpF();t._UZ(0,"label",19),t.TgZ(1,"input",20,21),t.NdJ("ngModelChange",function(r){return t.CHM(e),t.oxw().objFilter.contains=r})("input",function(r){return t.CHM(e),t.oxw(),t.MAs(12).filterGlobal(r.target.value,"contains")}),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.objFilter.contains)}}function lt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().showMdlHandler(null,"new")}),t.qZA(),t.TgZ(1,"button",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(),l=t.MAs(12);return l.filterGlobal("","contains"),r.ClearTblCat(l)}),t.qZA()}}const N=function(){return{width:"10%"}},F=function(){return{width:"17%"}},R=function(){return{width:"25%"}},b=function(){return{width:"15%"}};function ct(o,n){1&o&&(t.TgZ(0,"tr")(1,"th",24),t._uU(2),t.ALo(3,"translate"),t._UZ(4,"p-sortIcon",25),t.qZA(),t.TgZ(5,"th",26),t._uU(6),t.ALo(7,"translate"),t._UZ(8,"p-columnFilter",27),t.qZA(),t.TgZ(9,"th",26),t._uU(10),t.ALo(11,"translate"),t._UZ(12,"p-columnFilter",28),t.qZA(),t.TgZ(13,"th",26),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th",26),t._uU(17),t.ALo(18,"translate"),t._UZ(19,"p-columnFilter",29),t.qZA(),t.TgZ(20,"th",26),t._uU(21),t.ALo(22,"translate"),t.qZA()()),2&o&&(t.xp6(1),t.Akn(t.DdM(36,N)),t.xp6(1),t.Oqu(t.lcZ(3,24,"columns.id")),t.xp6(3),t.Akn(t.DdM(37,F)),t.xp6(1),t.Oqu(t.lcZ(7,26,"columns.name")),t.xp6(2),t.Q6J("showOperator",!1)("hideOnClear",!0),t.xp6(1),t.Akn(t.DdM(38,R)),t.xp6(1),t.Oqu(t.lcZ(11,28,"columns.description")),t.xp6(2),t.Q6J("showOperator",!1)("hideOnClear",!0),t.xp6(1),t.Akn(t.DdM(39,b)),t.xp6(1),t.Oqu(t.lcZ(15,30,"columns.items")),t.xp6(2),t.Akn(t.DdM(40,b)),t.xp6(1),t.hij("",t.lcZ(18,32,"columns.status")," "),t.xp6(2),t.Q6J("showOperator",!1)("hideOnClear",!0),t.xp6(1),t.Akn(t.DdM(41,b)),t.xp6(1),t.Oqu(t.lcZ(22,34,"columns.actions")))}const pt=function(){return{width:"15%",padding:"0px"}};function dt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"button",30),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().CategoryItemsMdl(l)}),t.qZA()(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"button",31),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().showMdlHandler(l,"edit")}),t.qZA()()()}if(2&o){const e=n.$implicit;t.xp6(1),t.Akn(t.DdM(17,N)),t.xp6(1),t.Oqu(e.id),t.xp6(1),t.Akn(t.DdM(18,F)),t.xp6(1),t.hij("",e.nombre," "),t.xp6(1),t.Akn(t.DdM(19,R)),t.xp6(1),t.Oqu(e.descripcion),t.xp6(1),t.Akn(t.DdM(20,b)),t.xp6(1),t.s9C("label",e.items.length),t.xp6(1),t.Akn(t.DdM(21,b)),t.xp6(1),t.hij(" ",e.estado?"Activo":"Inactivo"," "),t.xp6(1),t.Akn(t.DdM(22,pt))}}function mt(o,n){1&o&&(t.TgZ(0,"tr")(1,"td",32),t._uU(2,"No se encontraron registros."),t.qZA()())}function ut(o,n){if(1&o&&(t.TgZ(0,"div",33),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" Total Registros : ",e.objGrl.List?e.objGrl.List.length:0," ")}}function gt(o,n){1&o&&(t.TgZ(0,"small",48),t._uU(1,"Valor requerido."),t.qZA())}function bt(o,n){1&o&&(t.TgZ(0,"small",48),t._uU(1,"Valor requerido."),t.qZA())}function ht(o,n){if(1&o&&(t.TgZ(0,"div",34)(1,"form",35)(2,"div",4)(3,"div",36)(4,"label",37),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"input",38),t.qZA(),t.TgZ(8,"div",39)(9,"label",40),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",41),t.YNc(13,gt,2,0,"small",42),t.qZA(),t.TgZ(14,"div",39)(15,"label",43),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"input",44),t.YNc(19,bt,2,0,"small",42),t.qZA(),t.TgZ(20,"div",45)(21,"label",46),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"br")(25,"p-dropdown",47),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.objMdl.form),t.xp6(4),t.Oqu(t.lcZ(6,8,"columns.id")),t.xp6(5),t.Oqu(t.lcZ(11,10,"columns.name")),t.xp6(3),t.Q6J("ngIf",e.objMdl.form.controls.nombre.invalid&&(e.objMdl.form.controls.nombre.dirty||e.objMdl.form.controls.nombre.touched)),t.xp6(3),t.Oqu(t.lcZ(17,12,"columns.description")),t.xp6(3),t.Q6J("ngIf",e.objMdl.form.controls.descripcion.invalid&&(e.objMdl.form.controls.descripcion.dirty||e.objMdl.form.controls.descripcion.touched)),t.xp6(3),t.hij("",t.lcZ(23,14,"columns.status")," "),t.xp6(3),t.Q6J("options",e.objGrl.statuses)}}function ft(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",49),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveData()}),t.qZA(),t.TgZ(1,"button",50),t.NdJ("click",function(){return t.CHM(e),t.oxw().showDialog(!1)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.objMdl.form.invalid)}}const Ct=function(){return{"margin-bottom":"2em",width:"100%"}},_t=function(){return[10,25,50]},xt=function(){return{width:"800px"}},Zt=function(){return{"overflow-y":"auto","overflow-x":"hidden","max-height":"70vh","min-height":"200px"}};let vt=(()=>{class o{constructor(e,i,r,l,m,y,It){this.categoriesSvc=e,this.dialogSvc=i,this.msgSvc=r,this.confirmPopUpSvc=l,this.fb=m,this.refChanged=y,this.translate=It,this.subSink=new I.Y,this.objFilter={pagingPrms:{pageNumber:1,pageSize:500}},this.objMdl={form:a.cw,selectedItem:{id:0,nombre:"",descripcion:"",estado:0},showDialog:!1},this.objGrl={title:"Categorias",newItem:!1,mdlTitle:"",slctdCategory:$,ListPaginated:new v.mg,List:Array(),filteringOptions:["id","nombre","descripcion"],statuses:Y}}ngOnInit(){this.getList(),this.objMdl.form=this.fb.group({id:[{value:0,disabled:!0}],nombre:["",a.kI.required],descripcion:["",a.kI.required],estado:this.objGrl.statuses[0].value})}getList(){this.subSink.sink=this.categoriesSvc.Get(this.objFilter.pagingPrms).subscribe({next:e=>{this.objGrl.ListPaginated=e,this.objGrl.List=this.sortItems((0,d.pick)(e,"items").items)},error:e=>{this.msgSvc.add("error",c.bF.LISTAR_REG,`${c.bF.OP_ERROR} : ${e}`)}})}showMdlHandler(e,i){this.objGrl.mdlTitle="edit"===i?"Editar":"Crear",this.objGrl.mdlTitle=this.objGrl.mdlTitle+" categoria",this.objMdl.selectedItem="edit"===i?e:{id:0,nombre:"",descripcion:"",estado:1},this.objMdl.form.patchValue({id:this.objMdl.selectedItem.id,nombre:this.objMdl.selectedItem.nombre,descripcion:this.objMdl.selectedItem.descripcion,estado:this.objGrl.statuses.find(r=>r.value===this.objMdl.selectedItem.estado).value}),this.showDialog(!0)}saveData(){if(this.objMdl.form.valid){const e=Object.assign({},this.objMdl.form.value),i={id:this.objMdl.selectedItem.id,nombre:e.nombre,descripcion:e.descripcion,estado:e.estado?1:0};this.objMdl.selectedItem.id>0?this.onUpdateItem(i):this.onCreateItem(Object.assign(Object.assign({},i),{id:0}))}}onUpdateItem(e){this.subSink.sink=this.categoriesSvc.Update(e).subscribe({next:i=>{this.getList(),this.showDialog(!1),this.msgSvc.add("success",c.bF.ACTUALIZAR_REG,c.bF.OP_EXITOSA)},error:i=>{this.msgSvc.add("error",c.bF.ACTUALIZAR_REG,`${c.bF.OP_ERROR} : ${i}`)}})}onCreateItem(e){this.subSink.sink=this.categoriesSvc.Create(e).subscribe({next:i=>{this.getList(),this.showDialog(!1),this.msgSvc.add("success",c.bF.CREAR_REG,c.bF.OP_EXITOSA)},error:i=>{this.msgSvc.add("error",c.bF.CREAR_REG,`${c.bF.OP_ERROR} : ${i}`)}})}confirmPopUp(e,i,r){this.confirmPopUpSvc.confirm({key:"popup-routes",target:e.target,acceptLabel:"Si",rejectLabel:"No",message:"Esta seguro de elimar este item?",icon:"pi pi-exclamation-triangle",accept:()=>{this[i](r)}})}resetModalObj(e,i){switch(i){case"new":this.objGrl.List.push(Object.assign({},e));break;case"edit":const r=(0,d.findIndex)(this.objGrl.List,["id",e.id]);this.objGrl.List[r]=e;break;default:this.objGrl.List=(0,d.filter)(this.objGrl.List,l=>l.id!==e.id)}this.refChanged.detectChanges(),this.objMdl.form.reset(),this.objMdl.selectedItem={id:0,nombre:"",descripcion:"",estado:!1},this.showDialog(!1),"new"===i&&(this.objGrl.List=this.sortItems(this.objGrl.List))}showDialog(e){this.objMdl.showDialog=e}cleanUpFrmVars(){this.objGrl={slctdTodo:null},this.objGrl.frmTodoItems&&this.objGrl.frmTodoItems.reset()}setPagination(e){}sortItems(e){return(0,d.orderBy)(e,["id"],["desc"])}CategoryItemsMdl(e){this.objGrl.slctdCategory=e,this.ref=this.dialogSvc.open(W,{data:{category:e,categoryItemsList:this.objGrl.slctdCategory.items},header:`Categoria ${e.nombre}`,width:"75%",closable:!1,contentStyle:{overflow:"auto"},baseZIndex:1e4}),this.ref.onClose.subscribe(i=>{this.cleaningSelectedCategoryView(),this.objGrl.List.find(r=>r.id===i.category.id).items=i.categoryItemsList})}cleaningSelectedCategoryView(){this.objGrl.slctdCategory=null}ClearTblCat(e){e.clear(),this.inputBar.nativeElement.value=""}ngOnDestroy(){this.subSink.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(S),t.Y36(T.xA),t.Y36(M.o),t.Y36(u.YP),t.Y36(a.qu),t.Y36(t.sBO),t.Y36(h.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-categories"]],viewQuery:function(e,i){if(1&e&&t.Gf(st,5),2&e){let r;t.iGM(r=t.CRH())&&(i.inputBar=r.first)}},decls:20,vars:21,consts:[[3,"key"],[3,"header"],["pTemplate","header"],[1,"cstm-card"],[1,"p-grid"],[1,"p-col-12","p-sm-12",2,"margin-top","10px"],["styleClass","p-mb-5"],["pTemplate","left"],["pTemplate","right"],[1,"p-grid",2,"margin-top","-30px"],[2,"width","100%"],["dataKey","id","styleClass","p-datatable-sm",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","paginator","filterDelay","globalFilterFields","onPage"],["dt",""],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","summary"],["styleClass","p-fluid",3,"visible","header","modal","contentStyle","visibleChange"],["pTemplate","content","closable","false"],["pTemplate","footer"],["for","search"],["type","text","id","search","pInputText","","size","35","placeholder","Buscar...",2,"width","auto","font-size",".8em !important",3,"ngModel","ngModelChange","input"],["inputBar",""],["pButton","","type","button","icon","pi pi-plus",1,"p-button-text","p-button-raised",3,"click"],["pButton","","type","button","icon","pi pi-filter-slash",1,"p-button-text","p-button-raised",2,"margin-left","10px",3,"click"],["scope","col","pSortableColumn","id"],["field","id"],["scope","col"],["type","text","field","nombre","display","menu",3,"showOperator","hideOnClear"],["type","text","field","descripcion","display","menu",3,"showOperator","hideOnClear"],["type","text","field","estado","display","menu",3,"showOperator","hideOnClear"],["pButton","","type","button",1,"p-button-sm","p-button-rounded",2,"margin-top","5px","height","25px",3,"label","click"],["pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Editar","tooltipPosition","top","styleClass","p-button-sm",1,"p-button-rounded","p-button-secondary","p-button-text",3,"click"],["colspan","6"],[1,"p-d-flex","p-ai-center","p-jc-between"],[1,"p-grid","frm-dialog","card"],["autocomplete","off",3,"formGroup"],[1,"p-field","p-sm-1"],["for","id",1,"required"],["type","text","pInputText","","id","id","formControlName","id"],[1,"p-field","p-sm-4"],["for","nombre",1,"required"],["id","nombre","pInputTextarea","","formControlName","nombre","required","","rows","1","cols","40"],["class","p-error",4,"ngIf"],["for","descripcion",1,"required"],["id","descripcion","pInputTextarea","","formControlName","descripcion","required","","rows","1","cols","40"],[1,"p-field","p-sm-3",2,"text-align","center"],["for","estado",1,"required"],["formControlName","estado","optionLabel","label","optionValue","value",3,"options"],[1,"p-error"],["pButton","","pRipple","","label","Guardar","icon","pi pi-check",1,"p-button-text","p-button-rounded","p-button-raised",3,"disabled","click"],["pButton","","pRipple","","label","Cancelar","icon","pi pi-times",1,"p-button-text","p-button-rounded","p-button-raised",3,"click"]],template:function(e,i){1&e&&(t._UZ(0,"p-confirmPopup",0),t.TgZ(1,"p-card",1),t.YNc(2,nt,0,0,"ng-template",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"p-toolbar",6),t.YNc(7,at,3,1,"ng-template",7),t.YNc(8,lt,2,0,"ng-template",8),t.qZA()()(),t.TgZ(9,"div",9)(10,"p-card",10)(11,"p-table",11,12),t.NdJ("onPage",function(l){return i.setPagination(l)}),t.YNc(13,ct,23,42,"ng-template",2),t.YNc(14,dt,13,23,"ng-template",13),t.YNc(15,mt,3,0,"ng-template",14),t.YNc(16,ut,2,1,"ng-template",15),t.qZA()()()()(),t.TgZ(17,"p-dialog",16),t.NdJ("visibleChange",function(l){return i.objMdl.showDialog=l}),t.YNc(18,ht,26,16,"ng-template",17),t.YNc(19,ft,2,1,"ng-template",18),t.qZA()),2&e&&(t.Q6J("key","popup-categories"),t.xp6(1),t.Akn(t.DdM(17,Ct)),t.s9C("header",i.objGrl.title),t.xp6(10),t.Q6J("value",i.objGrl.List)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(18,_t))("paginator",!0)("filterDelay",0)("globalFilterFields",i.objGrl.filteringOptions),t.xp6(6),t.Akn(t.DdM(19,xt)),t.Q6J("visible",i.objMdl.showDialog)("header",i.objGrl.mdlTitle)("modal",!0)("contentStyle",t.DdM(20,Zt)))},directives:[O.P,G.Z,u.jx,ot.o,a.Fj,q.o,a.JJ,a.On,w.Hq,g.iA,g.lQ,g.fz,g.xl,D.u,it.V,a._Y,a.JL,a.sg,a.u,U.g,a.Q7,Z.O5,rt.Lt],pipes:[h.X$],styles:[".frm-dialog[_ngcontent-%COMP%]{width:100%!important;min-height:150px!important;margin-top:10px!important}.cstm-card[_ngcontent-%COMP%]{box-shadow:none!important;min-height:95vh!important;width:100%}"]}),o})();var Tt=s(7390),At=s(6276);const yt=[{path:"",component:vt}];let jt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[S],imports:[[Z.ez,Tt.Bz.forChild(yt),a.u5,a.UX,h.aw,At.h]]}),o})()}}]);